<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SHIN MP3</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="Misc/pics/Touhou.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tangerine:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  
  <header>
    <svg width="85" height="80" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
         <path d="M36.1 2C35.7 3.9 34 5.4 32 5.4c-2 0 -3.7 -1.5 -4.1 -3.4c-3.1 1.7 -5.3 5.6 -5.3 12.3c0 9.3 9.4 20.5 9.4 20.5s9.4 -11.2 9.4 -20.5c0 -6.7 -2.2 -10.6 -5.3 -12.3" fill="#FF506E"/>
         <path d="M62 24.3c-1.9 0.4 -3.8 -0.5 -4.7 -2.4c-0.9 -1.9 -0.4 -4.1 1.1 -5.4c-2.8 -2.2 -7.1 -2.5 -12.9 0.4c-8 4.2 -13.5 17.9 -13.5 17.9s13.7 4 21.7 -0.1c5.8 -2.9 8.2 -6.7 8.3 -10.4" fill="#FF506E"/>
         <path d="M2 24.3c1.9 0.4 3.8 -0.5 4.7 -2.4c0.9 -1.9 0.4 -4.1 -1.1 -5.4c2.8 -2.2 7.1 -2.5 12.9 0.4C26.5 21 32 34.7 32 34.7s-13.7 4 -21.7 -0.1C4.5 31.8 2.1 28 2 24.3" fill="#FF506E"/>
         <path d="M46.5 61.9c-0.7 -1.9 -0.1 -4 1.5 -5.2c1.6 -1.2 3.8 -1 5.2 0.3c1.6 -3.3 1.3 -7.8 -2.3 -13.3C45.8 36.1 32 32.5 32 32.5S30.3 47.3 35.4 55c3.6 5.5 7.6 7.4 11.1 6.9" fill="#FF506E"/>
         <path d="M17.5 61.9c0.7 -1.9 0.1 -4 -1.5 -5.2c-1.6 -1.2 -3.8 -1 -5.2 0.3c-1.6 -3.3 -1.3 -7.8 2.3 -13.3C18.2 36.1 32 32.5 32 32.5s1.7 14.8 -3.4 22.5c-3.6 5.5 -7.6 7.4 -11.1 6.9" fill="#FF506E"/>
         <path d="M35.6 5.7c-0.4 1.7 -1.9 3 -3.6 3s-3.2 -1.3 -3.6 -3c-2.7 1.5 -4.6 4.9 -4.6 10.8c0 8.2 8.3 18 8.3 18s8.3 -9.8 8.3 -18c-0.1 -5.9 -2 -9.3 -4.8 -10.8" fill="#FFF0F3"/>
         <path d="M58.3 25.3c-1.6 0.4 -3.4 -0.4 -4.1 -2.1c-0.8 -1.7 -0.3 -3.6 1 -4.7c-2.5 -1.9 -6.3 -2.2 -11.3 0.3C36.8 22.4 32 34.4 32 34.4s12 3.5 19.1 -0.1c5 -2.5 7.1 -5.8 7.2 -9" fill="#FFF0F3"/>
         <path d="M5.7 25.3c1.6 0.4 3.4 -0.4 4.1 -2.1c0.8 -1.7 0.3 -3.6 -1 -4.7c2.5 -1.9 6.3 -2.2 11.3 0.3c7 3.6 11.9 15.6 11.9 15.6s-12 3.5 -19.1 -0.1c-5 -2.5 -7.1 -5.8 -7.2 -9" fill="#FFF0F3"/>
         <path d="M44.7 58.3c-0.6 -1.6 -0.1 -3.6 1.4 -4.6s3.3 -0.9 4.6 0.3c1.4 -2.9 1.1 -6.8 -2 -11.6c-4.6 -6.8 -16.7 -10 -16.7 -10s-1.5 13 3 19.7c3.2 4.9 6.6 6.6 9.7 6.2" fill="#FFF0F3"/>
         <path d="M19.3 58.3c0.6 -1.6 0.1 -3.6 -1.4 -4.6s-3.3 -0.9 -4.6 0.3c-1.4 -2.9 -1.1 -6.8 2 -11.6c4.5 -6.7 16.6 -9.9 16.6 -9.9s1.5 13 -3 19.7c-3.1 4.8 -6.5 6.5 -9.6 6.1" fill="#FFF0F3"/>
     </svg>
     <h1>Eientei</h1>
             <nav>
                 <ul>
                     <li><a href="/SF3/index1.html">Home</a></li>
                     <li><a href="/SF3/Sub/FavArti/FavArti/index.html">FavArti</a></li>
                     <li><a href="/SF3/Sub/Canteen/Canteen_/index.html">Canteen Article</a></li>
                     <li><a href="/SF3/Sub/SHIN-MP3Web/index.html">MP3 Player</a></li>
                     <li><a href="/SF3/Contact.html">Contact Us</a></li>
                     <li id="logout-btn">Log Out<li>
                 </ul>

             </nav>

     </header>

  <div class="toggle-button" id="toggleButton">
    <button onclick="toggleSidebar()">☰</button>
  </div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div id="album-sidebar" class="album-sidebar">
      <button class="close-button" onclick="toggleSidebar()">X</button>
      <h3>Select Album</h3>
      <ul>
        <li class="album-item" id="album1" onclick="selectAlbum(0)">All Songs</li>
        <li class="album-item" id="album2" onclick="selectAlbum(1)">Show By Rock</li>
        <li class="album-item" id="album3" onclick="selectAlbum(2)">Dohna Dohna</li>
        <li class="album-item" id="album4" onclick="selectAlbum(3)">Will Stetson</li>
        <li class="album-item" id="album5" onclick="selectAlbum(4)">GARNiDELiA</li>
      </ul>
    </div>
  </div>

  <div class="Container">
    <h1>Enma-Tei</h1>
  </div>
  <!-- Music Player -->
  <div id="player-container">
    <img id="album-thumbnail" src="Misc/pics/1900x1900-000000-80-0-0.jpg" alt="Album Thumbnail" />
    <audio id="audio-player" autoplay></audio>
    <div id="track-info">
      <h2 id="track-title">Track Title</h2>
      <p id="track-artist">Artist Name</p>
    </div>

    <div class="controls">
      <button onclick="previousTrack()" class="control-btn">« Prev</button>
      <button onclick="playPauseTrack()" class="control-btn">▶ Play</button>
      <button onclick="nextTrack()" class="control-btn">» Next</button>
    </div>

    <div class="progress-bar-container">
      <input type="range" id="progress-bar" value="0" min="0" max="100">
    </div>

    <div class="time-info">
      <span id="current-time">0:00</span> / <span id="total-duration">0:00</span>
    </div>
  </div>
  <div id="track-list">
    <h3>Track List</h3>
    <ul id="track-list-container">
    </ul>
  </div>
</div>
  <script>

    var albums = [
    {
        title: "All Songs",
        artist: "None",

        thumbnail: "Misc/pics/1678472428481.png",
        tracks: [
          { title: "十六夜ゐ", artist: "徒然なる操り霧幻庵", src: "Misc/tracks/十六夜ゐ - 徒然なる操り霧幻庵 (Tsurezurenaru Ayatsuri Mugenan)(MP3_160K).mp3" },
          { title: "SASURAI", artist: "徒然なる操り霧幻庵", src: "Misc/tracks/_SASURAI_ - 徒然なる操り霧幻庵 (Tsurezurenaru Ayatsuri Mugenan)(MP3_160K).mp3" },
          { title: "Tabimichi Yoiyoi Yume Hanabi", artist: "徒然なる操り霧幻庵", src: "Misc/tracks/Tabimichi Yoiyoi Yume Hanabi - 徒然なる操り霧幻庵 (Tsurezurenaru Ayatsuri Mugenan)(MP3_160K).mp3" },
          { title: "Whatcha;Whatcha Doin", artist: "AliceSoft", src: "Misc/tracks/Whatcha_Whatcha Doin_(MP3_160K)_1.mp3" },
          { title: "SPARKs", artist: "AliceSoft", src: "Misc/tracks/SPARKs(MP3_160K).mp3" },
          { title: "あかときやみから", artist: "AliceSoft", src: "Misc/tracks/あかときやみから(MP3_160K).mp3" },
          { title: "Live in Life ", artist: "Will Stetson", src: "Misc/tracks/Live in Life - Will Stetson [MV] 【Hu Tao Fansong】(MP3_160K).mp3" },
          { title: "Morality Lesson", artist: "Will Stetsont", src: "Misc/tracks/Morality Lesson - Will Stetson [MV] 【HSR Fansong】(M4A_128K).m4a" },
          { title: "Writing on the Wall ", artist: "Will Stetson", src: "Misc/tracks/Writing on the Wall - Will Stetson [MV] 【Kaveh Fansong】(MP3_160K).mp3" },
          { title: "極楽浄土[Gokuraku Jodo]", artist: "GARNiDELiA", src: "Misc/tracks/【みうめ・メイリア・217】極楽浄土[Gokuraku Jodo]  OFFiCiAL(MP3_160K).mp3" },
          { title: "宵闇胡蝶[Yoiyami Kocho]", artist: "GARNiDELiA", src: "Misc/tracks/【りりちよ・メイリア】宵闇胡蝶[Yoiyami Kocho] OFFiCiAL【踊っちゃってみた第10弾】(MP3_160K).mp3" },
          { title: "謳歌爛漫[Oka Ramman]", artist: "GARNiDELiA", src: "Misc/tracks/【みうめ・メイリア・217】謳歌爛漫[Oka Ramman] OFFiCiAL【GARNiDELiA】(MP3_160K).mp3" }
        ],
        backgroundImage: "url('Misc/pics/sakura.jpg')"
      },
      {
        title: "Show By Rock",
        artist: "Tsurezurenaru Ayatsuri Mugenan",

        thumbnail: "Misc/pics/1900x1900-000000-80-0-0.jpg",
        tracks: [
          { title: "十六夜ゐ", artist: "徒然なる操り霧幻庵", src: "Misc/tracks/十六夜ゐ - 徒然なる操り霧幻庵 (Tsurezurenaru Ayatsuri Mugenan)(MP3_160K).mp3" },
          { title: "SASURAI", artist: "徒然なる操り霧幻庵", src: "Misc/tracks/_SASURAI_ - 徒然なる操り霧幻庵 (Tsurezurenaru Ayatsuri Mugenan)(MP3_160K).mp3" },
          { title: "Tabimichi Yoiyoi Yume Hanabi", artist: "徒然なる操り霧幻庵", src: "Misc/tracks/Tabimichi Yoiyoi Yume Hanabi - 徒然なる操り霧幻庵 (Tsurezurenaru Ayatsuri Mugenan)(MP3_160K).mp3" }
        ],
        backgroundImage: "url('Misc/pics/Tsurezure_naru_live_daru_dayu.webp')"
      },
      {
        title: "Dohna Dohna",
        artist: "AliceSoft",
        thumbnail: "Misc/pics/Antenna.(Dohna.Dohna).full.3598952.jpg",
        tracks: [
          { title: "Whatcha;Whatcha Doin", artist: "AliceSoft", src: "Misc/tracks/Whatcha_Whatcha Doin_(MP3_160K)_1.mp3" },
          { title: "SPARKs", artist: "AliceSoft", src: "Misc/tracks/SPARKs(MP3_160K).mp3" },
          { title: "あかときやみから", artist: "AliceSoft", src: "Misc/tracks/あかときやみから(MP3_160K).mp3" }
        ],
        backgroundImage: "url('Misc/pics/cg1-1-1024x576.jpg')"
      },
      {
        title: "Will Stetson",
        artist: "Will Stetson",
        thumbnail: "Misc/pics/download.png",
        tracks: [
          { title: "Live in Life ", artist: "Will Stetson", src: "Misc/tracks/Live in Life - Will Stetson [MV] 【Hu Tao Fansong】(MP3_160K).mp3" },
          { title: "Morality Lesson", artist: "Will Stetsont", src: "Misc/tracks/Morality Lesson - Will Stetson [MV] 【HSR Fansong】(M4A_128K).m4a" },
          { title: "Writing on the Wall ", artist: "Will Stetson", src: "Misc/tracks/Writing on the Wall - Will Stetson [MV] 【Kaveh Fansong】(MP3_160K).mp3" }
        ],
        backgroundImage: "url('Misc/pics/459084521_1952439661890361_1712876725948218878_n.jpg')"
      },
      {
        title: "GARNiDELiA",
        artist: "GARNiDELiA",
        thumbnail: "Misc/pics/download5.jfif",
        tracks: [
          { title: "極楽浄土[Gokuraku Jodo]", artist: "GARNiDELiA", src: "Misc/tracks/【みうめ・メイリア・217】極楽浄土[Gokuraku Jodo]  OFFiCiAL(MP3_160K).mp3" },
          { title: "宵闇胡蝶[Yoiyami Kocho]", artist: "GARNiDELiA", src: "Misc/tracks/【りりちよ・メイリア】宵闇胡蝶[Yoiyami Kocho] OFFiCiAL【踊っちゃってみた第10弾】(MP3_160K).mp3" },
          { title: "謳歌爛漫[Oka Ramman]", artist: "GARNiDELiA", src: "Misc/tracks/【みうめ・メイリア・217】謳歌爛漫[Oka Ramman] OFFiCiAL【GARNiDELiA】(MP3_160K).mp3" }
        ],
        backgroundImage: "url('Misc/pics/desktop-wallpaper-steam-workshop-garnidelia-garnidelia.jpg')"
      }
    ];

    document.body.style.backgroundImage = albums[0].backgroundImage;

    var currentAlbumIndex = 0;
    var currentTrackIndex = 0;
    var audio = document.getElementById('audio-player');
    var playButton = document.querySelector('.controls button:nth-child(2)');
    var progressBar = document.getElementById('progress-bar');
    var currentTimeElem = document.getElementById('current-time');
    var durationElem = document.getElementById('total-duration');

    function loadTrack(albumIndex, trackIndex) {
      currentAlbumIndex = albumIndex;
      currentTrackIndex = trackIndex;
      var track = albums[currentAlbumIndex].tracks[currentTrackIndex];
      audio.src = track.src;
      document.getElementById('track-title').textContent = track.title;
      document.getElementById('track-artist').textContent = track.artist;
      document.body.style.backgroundImage = albums[currentAlbumIndex].backgroundImage;
      var albumThumbnail = document.getElementById('album-thumbnail');
      albumThumbnail.src = albums[currentAlbumIndex].thumbnail;
      audio.play().catch(error => {console.error("Autoplay failed", error)});
    }

    // First track
    function selectAlbum(index) {
      currentAlbumIndex = index;
      loadTrack(currentAlbumIndex, 0);
      loadTrackList(currentAlbumIndex, 0);
    }

    loadTrack(currentAlbumIndex, 0);
    loadTrackList(currentAlbumIndex, 0);

    audio.addEventListener('play', function(){
      playButton.textContent = '❚❚ Pause'
    });

    audio.addEventListener('pause', function(){
      playButton.textContent = '▶ Play'
    });

    // Pause and Play
    function playPauseTrack() {
      if (audio.paused) {
        audio.play();
      } else {
        audio.pause();
      }
    }
    audio.addEventListener('canplay', function(){
      console.log('Audio is ready to play')
    });

    // Next
    function nextTrack() {
      var album = albums[currentAlbumIndex];
      currentTrackIndex = (currentTrackIndex + 1) % album.tracks.length;
      loadTrack(currentAlbumIndex, currentTrackIndex);
    }

    // Prev
    function previousTrack() {
      var album = albums[currentAlbumIndex];
      currentTrackIndex = (currentTrackIndex - 1 + album.tracks.length) % album.tracks.length;
      loadTrack(currentAlbumIndex, currentTrackIndex);
    }

    // Progress bar
    audio.addEventListener('timeupdate', function() {
      var progress = (audio.currentTime / audio.duration) * 100;
      progressBar.value = progress || 0;

      currentTimeElem.textContent = formatTime(audio.currentTime);
      durationElem.textContent = formatTime(audio.duration);
    });

    // Time
    function formatTime(time) {
      var minutes = Math.floor(time / 60);
      var seconds = Math.floor(time % 60);
      return minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
    }

    // Seek
    progressBar.addEventListener('input', function() {
      var seekTime = (progressBar.value / 100) * audio.duration;
      audio.currentTime = seekTime;
    });

    audio.addEventListener('ended', function() {
      nextTrack();
    });

function loadTrackList(albumIndex) {
  var album = albums[albumIndex];
  var trackListContainer = document.getElementById('track-list-container');
  trackListContainer.innerHTML = ''; // Clear the list first

  // Tracklist
  album.tracks.forEach((track, index) => {
    var listItem = document.createElement('li');
    listItem.textContent = track.title + ' - ' + track.artist;
    listItem.addEventListener('click', function() {
      loadTrack(albumIndex, index); // Load the selected track
    });
    trackListContainer.appendChild(listItem);
  });
}

function selectAlbum(index) {
  currentAlbumIndex = index;
  loadTrack(currentAlbumIndex, 0); // Load the first track
  loadTrackList(currentAlbumIndex); // Load the track list
}
  </script>

  <script>
    // Toggle login form visibility
    function toggleLoginForm() {
      var loginForm = document.getElementById("loginForm");
      loginForm.style.display = (loginForm.style.display === "block") ? "none" : "block";
    }

    // Toggle sidebar visibility
    function toggleSidebar() {
      var sidebar = document.getElementById("sidebar");
      var toggleButton = document.getElementById("toggleButton");

      sidebar.classList.toggle("active");
      toggleButton.classList.toggle("hidden");
    }
  </script>
          <script>

            // Check if the user is logged in
        if (localStorage.getItem('userLoggedIn') !== 'true') {
            alert('You must log in first.');
            window.location.href = '/SF3/login.html'; // Redirect to login page if not logged in
        }

        // Log out functionality
        document.getElementById('logout-btn').addEventListener('click', function() {
            localStorage.setItem('userLoggedIn', 'false'); // Set logged-in status to false
            alert('You have logged out.');
            window.location.href = '/SF3/login.html'; // Redirect to login page after logout
        });
            
        </script>

<footer>
  <p>&copy; 2024 Eientei. All Rights Reserved.</p>
</footer>

</body>
</html>
